<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>The Official Radare Blog  | r2pipe API</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.58.3" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="r2pipe API" />
<meta property="og:description" content="r2pipe
The r2pipe design comes from the fact that using native APIs is much more complex and slower rather than using raw command strings and parsing the output. It encourages users to write pipe implementations which interact with the &ldquo;quiet&rdquo; mode of radare2 and use JSONs for easier deserialization. We have multiple implementations already present with a number of users opting to use exploratory languages such as Python and Ruby." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://radare.today/posts/r2api/" />
<meta property="article:published_time" content="2017-07-17T00:00:00+01:00" />
<meta property="article:modified_time" content="2017-07-17T00:00:00+01:00" />
<meta itemprop="name" content="r2pipe API">
<meta itemprop="description" content="r2pipe
The r2pipe design comes from the fact that using native APIs is much more complex and slower rather than using raw command strings and parsing the output. It encourages users to write pipe implementations which interact with the &ldquo;quiet&rdquo; mode of radare2 and use JSONs for easier deserialization. We have multiple implementations already present with a number of users opting to use exploratory languages such as Python and Ruby.">


<meta itemprop="datePublished" content="2017-07-17T00:00:00&#43;01:00" />
<meta itemprop="dateModified" content="2017-07-17T00:00:00&#43;01:00" />
<meta itemprop="wordCount" content="479">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="r2pipe API"/>
<meta name="twitter:description" content="r2pipe
The r2pipe design comes from the fact that using native APIs is much more complex and slower rather than using raw command strings and parsing the output. It encourages users to write pipe implementations which interact with the &ldquo;quiet&rdquo; mode of radare2 and use JSONs for easier deserialization. We have multiple implementations already present with a number of users opting to use exploratory languages such as Python and Ruby."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://radare.today" class="f3 fw2 hover-white no-underline white-90 dib">
      The Official Radare Blog
    </a>
    <div class="flex-l items-center">
      

      
      



<a href="radareorg" target="_blank" class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel="noopener" aria-label="follow on Twitter——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>









    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        POSTS
      </p>
      <h1 class="f1 athelas mb1">r2pipe API</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2017-07-17T00:00:00&#43;01:00">July 17, 2017</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p><strong>r2pipe</strong></p>

<p>The r2pipe design comes from the fact that using native APIs is much more
complex and slower rather than using raw command strings and parsing the output.
It encourages users to write pipe implementations which interact with the
&ldquo;quiet&rdquo; mode of radare2 and use JSONs for easier deserialization. We have
multiple <a href="https://github.com/radare/radare2-r2pipe">implementations</a> already
present with a number of users opting to use exploratory languages such as
Python and Ruby.</p>

<p><strong>Why r2api?</strong></p>

<p>The pipe ideally was envisioned to consist of a simple interface to spawn a r2
instance and setup remote communication with it either through pipes, HTTP, TCP
or what have you. But as the community decided to make more use of r2pipe they
also felt that the implementations should support certain higher level
abstractions through use of classes, helper functions(beyond the ones already
provided by r2) or structures to be more productive and expressive scripting.</p>

<p>This was implemented as a part of
<a href="https://github.com/radare/r2pipe.rs">r2pipe.rs</a> which was written in Rust, a
language which heavily influences the style of programming due strong typing
features. Other rust-based projects such as radeco and rune which use r2 as
their binary loader so to say, shared certain requirements in terms of
high-level structures they wished to operate on. Hence those features were added
to r2pipe.rs as a part of the base implementation. But as the requirements
grew, the logic started moving away from the original idea and hence the
community decided to seperate the two and move these features into a seperate
playground.</p>

<p><a href="https://github.com/radare/radare2-r2pipe-api">radare2-r2pipe-api</a> is where you
can add support for abstractions in your favorite language while keeping the
underlying communication intact. This was recently taken up for Rust, and the
API changes have been propagated to (active :P)repositories.</p>

<p><strong>Build fixes for Rust users:</strong></p>

<p>In case you are a r2pipe.rs/radeco-lib/rune user, you should update your
dependencies and the default rust toolchain as well.</p>

<p>Add the r2api dependecy in your Cargo.toml file:</p>

<pre><code>[dependecies.r2api]
git = &quot;https://github.com/radare/radare2-r2pipe-api&quot;
</code></pre>

<p>Add crate usage in your lib.rs:</p>

<pre><code class="language-rust">extern crate r2api;
</code></pre>

<p>All the structures have been moved under the <code>structs</code> module of r2api. Hence:</p>

<pre><code class="language-rust">// use r2pipe::structs::LOpinfo;
// Replace the above line with:
use r2api::structs::LOpinfo;
</code></pre>

<p>The entire set of r2pipe functions operating on the r2 instance are now a part
of the <code>R2Api</code> trait implemented for <code>R2</code>. Hence, just add the follwing line to
files where you call functions on the r2 instance from r2pipe:</p>

<pre><code class="language-rust">use r2pipe::r2::R2;
// Add the line below
use r2api::api_trait::R2Api;
</code></pre>

<p>Cargo deps can be updated as below:</p>

<pre><code class="language-bash">$ cargo clean # Necessary for removing earlier conflicting versions
$ cargo update
$ cargo build
</code></pre>

<p>The community hopes to see better support for more languages being added to the
new repository. There are also plans to standardize much of the implementation
and design so make sure to contribute to the discussions! Till then, don&rsquo;t
forget to renew your r2 license regularly.</p>

<p>Relevant pull requests:</p>

<ul>
<li><a href="https://github.com/radare/radare2-r2pipe-api/pull/1">radare2-r2pipe-api</a></li>
<li><a href="https://github.com/radare/radeco-lib/pull/64">radeco-lib</a></li>
<li><a href="https://github.com/radare/r2pipe.rs/pull/23">r2pipe.rs</a></li>
<li><a href="https://github.com/sushant94/rune/pull/29">rune</a></li>
</ul>
<ul class="pa0">
  
</ul>
<div class="mt6">
      
      
      </div>
    </section>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://radare.today" >
    &copy; 2019 The Official Radare Blog
  </a>
    <div>



<a href="radareorg" target="_blank" class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel="noopener" aria-label="follow on Twitter——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>








</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
